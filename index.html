<html>
<head>
	<title>test</title>
</head>
<style type="text/css">




body {
background-color: #fff;
}


/*** limitation de l'espace d'affichage ***/
#screen{
	width:1024px;
	height: 768px;
	overflow: hidden;
	background: #650205;
	text-align: center;
	position: relative;
}



/*** taille des saucisses ***/
#knack1, #knack2, #knack3, #knack4, #knack5, #knack6 {
	width: 25%;
	margin: 0 10%;
	transition: all .1s ease-in-out;
	opacity:0;
	z-index: 20;
	position: relative;

}





/*** effet de transformation des saucisses ***/
.incr { 
	transform: scale(1.75); 
}

.decr {
	transform: scale(0.75);
}


.rotateIncr { 
	-webkit-transform: rotate(360deg) !important;
}

.rotateDecr {
	-webkit-transform: rotate(0deg) !important;
}

.

/*** style du texte ***/
#typo1, #typo2, #typo3, #typo4, #typo5, #typo6{

	font-size: 800%;
	font-weight: bold;
	color:#650205;
	position: absolute;
	line-height: 0.8em;
	font-family: Helvetica;
	opacity: 0;
	transition: all .9s ease-in-out;
	background-color:#fff;
	padding: 5%;
	top:0;
	left:0;
	width:70%;
	margin: 20% 10%;
	text-align: center;

}

#typo1 {  z-index: 1;  }

#typo2 {  z-index: 2;  }

#typo3 {  z-index: 3;  }

#typo4 {  z-index: 4;  }

#typo5 {  z-index: 5;  }

#typo6 {  z-index: 6;  }

/***** pour faire clignotter le texte *****/

.blink_me {
    -webkit-animation-name: blinker;
    -webkit-animation-duration: 0.1s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;

    -moz-animation-name: blinker;
    -moz-animation-duration: 0.1s;
    -moz-animation-timing-function: linear;
    -moz-animation-iteration-count: infinite;

    animation-name: blinker;
    animation-duration: 0.1s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}

@-moz-keyframes blinker {  
    0% { opacity: 1.0; }
    50% { opacity: 0.0; }
    100% { opacity: 1.0; }
}

@-webkit-keyframes blinker {  
    0% { opacity: 1.0; }
    50% { opacity: 0.0; }
    100% { opacity: 1.0; }
}

@keyframes blinker {  
    0% { opacity: 1.0; }
    50% { opacity: 0.0; }
    100% { opacity: 1.0; }
}

</style>

<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
		function step() {
			document.deg = document.deg + 1 % 360;
			var colors = ['#ff0000', '#00ff00', '#0000ff']; //Couleurs à définir
			var random_color = colors[Math.floor(Math.random() * colors.length)];
			
			//var style = 'repeating-linear-gradient( '+ document.deg +'deg, #650205, #650205 200px, #9a0a11 200px, #9a0a11 400px)';
			if (document.deg % 90) {
				var style = 'repeating-linear-gradient( '+ document.deg +'deg, '+random_color+', '+random_color+' 200px, #9a0a11 200px, #9a0a11 400px)';
				console.log('multiple 90');
			} else {
				var style = 'repeating-linear-gradient( -'+ document.deg +'deg, '+random_color+', '+random_color+' 200px, #9a0a11 200px, #9a0a11 400px)';
			}

			//var style = 'repeating-linear-gradient( '+ document.deg +'deg, '+random_color+', '+random_color+' 200px, #9a0a11 200px, #9a0a11 400px)';
			$('#screen').css('background', style);

			$('#morteau').css('transform', 'rotate(-'+document.deg+'deg)');
			window.requestAnimationFrame(step);
		};


	$(document).ready(function() {
		if (window.io !== undefined) {
			window.socket = io();
		} else {
			window.socket = {};
			window.socket.emit = function() {};
		}
		

		document.deg = 0;

		$('body').keydown(function(event) {
		
		 window.socket.emit('down', event.which);
		 if ( event.which == 87 ) { // touche w
		   console.log('touche w');
		   rotateSausages('#knack1');
		   flash('#knack1');
		   showtxt('#typo1');

		  }

		 else if ( event.which == 65 ) { // touche a
		   console.log('touche a');
		   flash('#knack2');
		   rotateSausages('#knack2');
		   showtxt('#typo2');
		  }

		 else if ( event.which == 83 ) { // touche S
		   console.log('touche s');
		   flash('#knack3');
		   rotateSausages('#knack3');
		   showtxt('#typo3');
		  }

		 else if ( event.which == 68 ) { // touche d
		   console.log('touche d');
		   flash('#knack4');
		   rotateSausages('#knack4');
		   showtxt('#typo4');
		  }

		 else if ( event.which == 70 ) { // touche f
		   console.log('touche f');
		   flash('#knack5');
		   rotateSausages('#knack5');
		   showtxt('#typo5');
		  }

		 else if ( event.which == 71 ) { // touche g
		   console.log('touche g');
		   flash('#knack6');
		   rotateSausages('#knack6');
		   showtxt('#typo6');
		  }

		 else  { 
		 	console.log('autre touche');
		  }

		  })


		

		$('body').on('keyup', deflash, derotateSausages);
		$('body').on('keyup', hidetxt);

		window.requestAnimationFrame(step);
	});
		function flash(saucisse) {
			$(saucisse).addClass('incr').removeClass('decr');
			$(saucisse).css('opacity', '1');
		}

		function deflash(event) {
			window.socket.emit('up', event.which);
			$('.saucisse').addClass('decr').removeClass('incr');
			$('.saucisse').css('opacity', '0');
		}
		function showtxt(typo) {
			$(typo).css('opacity', '1');
			$(typo).addClass('blink_me');

		}

		function hidetxt() {
			$('.texte').css('opacity', '0');	
			$('.texte').removeClass('blink_me');


		}
		function rotateSausages(saucisse) {
			$(saucisse).addClass('rotateIncr').removeClass('rotateDecr');
			$(saucisse).css('opacity', '1');		
		}
		function derotateSausages() {
			$('.saucisse').addClass('rotateDecr').removeClass('rotateIncr');
			$('.saucisse').css('opacity', '0');
		}



</script>

<body id="plop">

	<div id="screen">
		<img id="knack1" class="saucisse" src="mcol-sausage.svg" />
		<img id="knack2" class="saucisse" src="sausage.svg" /><br />
		<img id="knack3" class="saucisse" src="mcol-sausage.svg" />
		<img id="knack4" class="saucisse" src="mcol-sausage.svg" />
		<img id="knack5" class="saucisse" src="white-sausage.svg" />
		<img id="knack6" class="saucisse" src="mcol-sausage.svg" />

		<p id="typo1" class="texte">KRAFT<br />wurscht</p>
		<p id="typo2" class="texte">knack<br />WERK</p>
		<p id="typo3" class="texte">DIGITAL<br />barbecue</p>
		<p id="typo4" class="texte">sound of<br />WURSCHT</p>
		<p id="typo5" class="texte">ELECTRO<br />meat beat</p>
		<p id="typo6" class="texte">DROP<br />the meat</p>

	</div>


</body>
</html>